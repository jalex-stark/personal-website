jQuery(document).ready(function(o){function t(){o(".wsko-ajax-input:not(.wsko_st_init)").addClass("wsko_st_init").on("change",function(t){o(".wsko-co-saving-text").html('<i class="fa fa-spinner fa-spin"></i> '+window.wsko_text("co_saving")),o(".wsko-co-saving-prefix").show(),window.parent.postMessage("wsko_co_saving",location.origin)}).on("wsko_ajax_input_save_success",function(t){o(".wsko-co-saving-text").text(window.wsko_text("co_saving_success")),o(".wsko-co-saving-prefix").show(),window.parent.postMessage("wsko_co_saving_success",location.origin)}).on("wsko_ajax_input_save_fail",function(t){o(".wsko-co-saving-text").html('<i class="fa fa-times"></i> '+window.wsko_text("co_saving_failed")),o(".wsko-co-saving-prefix").show(),window.parent.postMessage("wsko_co_saving_failed",location.origin)}),o(".wsko-co-lazy-tab").each(function(t){var s=o(this),e=s.closest(".wsko-tab");if(id=e.attr("id"),id){var i=o('a.wsko-nav-link[href="#'+id+'"]');if(e.hasClass("wsko-tab-active")){if(!e.hasClass("wsko-loaded")){switch(s.data("tab")){case"content":f(s.data("post"),s);break;case"keywords":k(s.data("post"),s);break;case"linking":p(s.data("post"),s);break;case"backlinks":_(s.data("post"),s);break;case"performance":u(s.data("post"),s)}e.addClass("wsko-loaded")}}else i.click(function(o){if(!e.hasClass("wsko-loaded")){switch(s.data("tab")){case"content":f(s.data("post"),s);break;case"keywords":k(s.data("post"),s);break;case"linking":p(s.data("post"),s);break;case"backlinks":_(s.data("post"),s);break;case"performance":u(s.data("post"),s)}e.addClass("wsko-loaded")}})}}),o("#wsko_reload_co_content_btn:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault(),f(o(this).data("post"),o(this))}),o(".wsko-co-set-link-btn:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this);window.wsko_post_element({action:"wsko_co_set_link",post:s.data("post"),index:s.data("index"),length:s.data("length"),target:s.data("target"),nonce:wsko_co_data.set_link_nonce},function(o){o.success&&p(s.data("r-post"),s)},function(){},s,!1)}),o(".wsko-content-optimizer-link:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this);window.wsko_open_optimizer_modal(s.data("post"),"post_id",s.data("opentab"))}),o("#wsko_content_optimizer_modal:not(.wsko-init)").addClass("wsko-init").click(function(t){var s=o("#wsko_content_optimizer_modal").removeClass("wsko-modal-active");s.find(".wsko-modal-multi-container").hide(),h=!1,o("body").removeClass("modal-open")}),o("#wsko_content_optimizer_modal .wsko-modal-close:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o("#wsko_content_optimizer_modal").removeClass("wsko-modal-active");s.find(".wsko-modal-multi-container").hide(),h=!1,o("body").removeClass("modal-open")}),o(".wsko-content-optimizer-multi-link:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this),e=o("#wsko_content_optimizer_modal").addClass("wsko-modal-active"),i=e.find(".wsko-modal-multi-container").show().html("");e.find(".wsko-modal-multi-container-bar").hide(),e.find(".wsko-modal-loader").hide(),e.find(".wsko-modal-content").hide(),o("body").addClass("modal-open"),h=!0;var a=s.data("posts")?s.data("posts"):{};i.append('<h4 class="wsko-content-optimizer-multi-link-title modal-title panel-heading">'+s.data("title")+"</h4>"),o.each(a,function(o,t){i.append('<a href="#" class="wsko-content-optimizer-link wsko-multi-link dark" data-post="'+o+'">'+t.title+'<br/><small class="wsko-content-optimizer-multi-link-url text-off">'+t.url+"</small></a>")}),window.wsko_init_core()}),o(".wsko-content-optimizer-multi-ajax-link:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this),e=o("#wsko_content_optimizer_modal").addClass("wsko-modal-active"),i=e.find(".wsko-modal-multi-container").show().html("");e.find(".wsko-modal-multi-container-bar").hide(),e.find(".wsko-modal-loader").show(),e.find(".wsko-modal-content").hide(),o("body").addClass("modal-open"),h=!0;var a=s.data("action"),n=s.data("nonce"),d=s.data("ajax-arg");window.wsko_post_element({action:a,arg:d,nonce:n},function(o){if(e.find(".wsko-modal-loader").hide(),o.success)return i.html(o.view),o.title&&i.prepend('<h4 class="wsko-content-optimizer-multi-link-title modal-title panel-heading">'+o.title+"</h4>"),window.wsko_init_core(),!0;e.find(".wsko-modal-close").click()},function(){e.find(".wsko-modal-loader").hide(),e.find(".wsko-modal-close").click()},!1,!1)}),o(".wsko-nav .wsko-nav-link:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this);s.closest(".wsko-nav").find(".wsko-nav-link").removeClass("wsko-nav-link-active"),s.addClass("wsko-nav-link-active");var e=o(s.attr("href"));e.hasClass("wsko-tab")&&(e.closest(".wsko-tab-content").children(".wsko-tab").removeClass("wsko-tab-active").hide(),e.addClass("wsko-tab-active").fadeIn())}),o(".wsko-content-optimizer input").keypress(function(t){if(13==t.which)return o(this).change(),!1}),o(".wsko-co-media-picker:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this),e=s.closest(".wsko-co-media-picker-container").find(".wsko-co-media-picker-target");"undefined"!=typeof wp&&wp.media&&wp.media.editor&&(wp.media.editor.send.attachment=function(o,t){e.val(t.url),e.change()},wp.media.editor.open(s))})}function s(){o(".wsko-metas-save-button:not(.wsko-init)").addClass("wsko-init").click(function(t){c(o(this))}),o(".wsko-metas-slide-control:not(.wsko-init)").addClass("wsko-init").click(function(t){t.preventDefault();var s=o(this).closest(".wsko-metas-slide-wrapper"),e=s.data("slide"),i=o(this).data("slide"),a=s.data("max"),n=s.find('.wsko-metas-slide-control[data-slide="left"]'),d=s.find('.wsko-metas-slide-control[data-slide="right"]');e||(e=0),"right"==i?(e++,e>=a&&(e=a-1)):(e--,e<0&&(e=0)),s.find(".wsko-metas-slide").removeClass("wsko-metas-slide-active"),s.find('.wsko-metas-slide[data-slide="'+e+'"]').addClass("wsko-metas-slide-active"),n.removeClass("wsko-metas-slide-inactive"),d.removeClass("wsko-metas-slide-inactive"),e==a-1?(n.removeClass("wsko-metas-slide-inactive"),d.addClass("wsko-metas-slide-inactive")):0==e&&(d.removeClass("wsko-metas-slide-inactive"),n.addClass("wsko-metas-slide-inactive")),s.data("slide",e)}),o(".wsko-metas-search-field:not(.wsko-init)").addClass("wsko-init").on("keyup",function(t){var s=o(this),e=s.val();if(13==t.which)return!1;e?(e=e.toLowerCase(),s.closest(".wsko-metas-search-wrapper").find(".wsko-metas-placeholder").each(function(t){-1!=o(this).data("search").search(e)?o(this).show():o(this).hide()})):s.closest(".wsko-metas-search-wrapper").find(".wsko-metas-placeholder").show(),s.closest(".wsko-metas-search-wrapper").find(".wsko-snippet-fields").each(function(t){0==o(this).find(".wsko-metas-placeholder:visible").length?o(this).find(".wsko-metas-search-no-items").show():o(this).find(".wsko-metas-search-no-items").hide()})}),o(".wsko-metas-field-hide-slug:not(.wsko-init)").addClass("wsko-init").change(function(){o(this).is(":checked")?o(this).closest(".wsko-set-metas-wrapper").find(".wsko-metas-field-url").attr("disabled",!0):o(this).closest(".wsko-set-metas-wrapper").find(".wsko-metas-field-url").attr("disabled",!1)}).change(),o(".wsko-hightlight-input:not(.wsko-init)").addClass("wsko-init").click(function(t){t.preventDefault();var s=o(this),e=s.closest(s.data("container"));e.find(".wsko-hightlight-input").each(function(t){var s=o(this);s.data("highlight-timeout")&&clearTimeout(s.data("highlight-timeout")),e.find(s.data("input")).removeClass("wsko-input-highlight")});var i=e.find(s.data("input")).focus().addClass("wsko-input-highlight");i.data("highlight-timeout",setTimeout(function(){i.removeClass("wsko-input-highlight")},2e3))});var t=o(".wsko-set-metas-wrapper:not(.wsko-init)").addClass("wsko-init").on("wsko_metas_submit",function(t){var s=o(this),e=s.closest(".wsko-set-metas-wrapper");if(!s.data("saving-disabled")){e.find(".wsko-metas-save-button").removeClass("wsko-button-success wsko-metas-changed");var i=s.find(":input").serialize();s.data("robots")&&(s.find(".wsko-metas-field-robotsni").is(":checked")||(i+=(i?"&":"")+"robots_ni=false"),s.find(".wsko-metas-field-robotsnf").is(":checked")||(i+=(i?"&":"")+"robots_nf=false")),s.data("canonical")&&(i+=(i?"&":"")+"canon="+s.find(".wsko-metas-field-canonical-spec").val()),s.find(".wsko-metas-field-hide-slug").length&&(s.find(".wsko-metas-field-hide-slug").is(":checked")||(i+=(i?"&":"")+"hide_slug=false")),e.find(".wsko-metas-load-overlay").show();var a=e.find(".wsko-tabs-social-snippets li a.wsko-nav-link-active").closest("li").index();s.data("new-links")&&confirm(window.wsko_text("auto_redirect_confirm"))&&(i+=(i?"&":"")+"create_redirects=true"),o(".wsko-co-saving-text").html('<i class="fa fa-spinner fa-spin"></i> '+window.wsko_text("co_saving")),window.parent.postMessage("wsko_co_saving",location.origin),window.wsko_post_element({action:"wsko_set_metas",data:i,type:e.data("type"),arg:e.data("arg"),nonce:e.data("nonce")},function(t){if(t.success){o(".wsko-co-saving-text").text(window.wsko_text("co_saving_success")),window.parent.postMessage("wsko_co_saving_success",location.origin),window.wsko_notification(!1,"test"),l(e.data("arg"),e),s.data("new-links",!1);var i=o(t.new_view);e.replaceWith(i),window.wsko_init_core(),i.find(".wsko-tabs-social-snippets li").eq(a).find("a").click()}else o(".wsko-co-saving-text").html('<i class="fa fa-times"></i> '+window.wsko_text("co_saving_fail")),window.parent.postMessage("wsko_co_saving_failed",location.origin);o(".wsko-co-saving-prefix").show(),e.find(".wsko-metas-load-overlay").hide()},function(){o(".wsko-co-saving-text").html('<i class="fa fa-times"></i> '+window.wsko_text("co_saving_fail")),window.parent.postMessage("wsko_co_saving_failed",location.origin),o(".wsko-co-saving-prefix").show(),e.find(".wsko-metas-load-overlay").hide()},!1,!1)}}).each(function(t){o(this).data("saving-disabled")&&o(this).find(":input").attr("disabled",!0)});t.find(".wsko-meta-tab :input:not(.wsko-metas-search-field)").on("change keydown",function(){var t=o(this),s=t.closest(".wsko-set-metas-wrapper");"url"!=t.attr("name")&&"hide_slug"!=t.attr("name")||s.data("new-links",!0),r(t)}),void 0!==jQuery.ui&&void 0!==jQuery.ui.draggable&&void 0!==jQuery.ui.droppable&&(o(".wsko-metas-placeholder:not(.wsko-init)").addClass("wsko-init").draggable({revert:!0,helper:"clone"}),o(".wsko-metas-field-desc,.wsko-metas-field-title").not(".wsko-init").addClass("wsko-init").droppable({accept:".wsko-metas-placeholder",drop:function(t,s){var e=o(s.draggable.eq(0)).data("tag"),i=o(this).get(0);if(document.selection){i.focus();var a=document.selection.createRange();a.text=e,i.focus()}else if(i.selectionStart||0===i.selectionStart){var n=i.selectionStart,d=i.selectionEnd,r=i.scrollTop;i.value=i.value.substring(0,n)+e+i.value.substring(d,i.value.length),i.focus(),i.selectionStart=n+e.length,i.selectionEnd=n+e.length,i.scrollTop=r}else i.value+=e,i.focus();o(i).change()}}))}function e(){o(".wsko-keyword-research-submit-button:not(.wsko-init)").addClass("wsko-init").click(function(t){t.preventDefault();var s=o(this);if($this=o("#wsko_keyword_research_form_dummy"),$this.data("demo"))$suggest=o("#wsko_keyword_research_form_dummy").find(".wsko-keyword-report-suggests a.wsko-open-keyword-research").first(),$suggest.length&&$suggest.click();else if($this.find('input[name="keyword"]').val()){var e=[];$this.find('input[name="type[]"]:checked').each(function(t){e.push(o(this).val())}),o(".wsko-close-keyword-research").click(),e.length>0&&window.wsko_post_element({action:"wsko_do_keyword_research",keyword:$this.find('input[name="keyword"]').val(),loc:$this.find('select[name="loc"]').val(),lang:$this.find('select[name="lang"]').val(),type:e,nonce:$this.data("nonce")},function(t){t.success&&(o("#wsko_keyword_research_history").collapse("hide"),o("#wsko_keyword_research_overlay").fadeIn(),o("#wsko_keyword_research_container").html(t.view))},!1,s,!1)}}),o(".wsko-open-keyword-research:not(.wsko-init)").addClass("wsko-init").click(function(t){t.preventDefault();var s=o(this);o("#wsko_keyword_research_container").html(""),window.wsko_post_element({action:"wsko_get_keyword_research",id:s.data("research"),nonce:s.data("nonce")},function(t){t.success?(o("#wsko_keyword_research_history").collapse("hide"),o("#wsko_keyword_research_overlay").fadeIn(),o("#wsko_keyword_research_container").html(t.view)):o("#wsko_keyword_research_container").html('<i class="fa fa-times fa-5x"></i>')},!1,s,!1)}),o(".wsko-keyword-report-search-field:not(.wsko-init)").addClass("wsko-init").on("keyup change",function(t){var s=o(this),i=s.data("timeout"),a=!!s.data("all"),n=s.val(),d=o("#wsko_keyword_research_form_dummy").find(".wsko-keyword-report-suggests");i&&clearTimeout(i),13==t.which&&o("#wsko_keyword_research_form_dummy .wsko-keyword-research-submit-button").click(),(a||n!=s.data("old-val"))&&s.data("timeout",setTimeout(function(){n?(d.html('<div class="wsko-loader-small"></div>'),window.wsko_post_element({action:"wsko_get_report_suggestions",keyword:n,all:a,nonce:s.data("nonce")},function(o){return o.success&&o.view?(s.data("old-val",n),d.addClass("active").html(o.view),e()):d.html("").removeClass("active"),!0},function(){return d.html("").removeClass("active"),!0},!1,!1)):d.removeClass("active").html("")},1e3))}).on("blur",function(){$suggests=o("#wsko_keyword_research_form_dummy").find(".wsko-keyword-report-suggests"),setTimeout(function(){$suggests.removeClass("active")},200)}).on("focusin",function(){$suggests=o("#wsko_keyword_research_form_dummy").find(".wsko-keyword-report-suggests").has("li"),$suggests.addClass("active")}),o(".wsko-research-get-all-suggestions:not(.wsko-init)").addClass("wsko-init").click(function(t){t.preventDefault(),t.stopPropagation(),o(".wsko-keyword-report-search-field").focus().data("all",!0).change().data("all",!1)}),o(".wsko-close-keyword-research:not(.wsko-init)").addClass("wsko-init").click(function(t){t.preventDefault(),o("#wsko_keyword_research_overlay").fadeOut()}),o(".wsko-co-add-priority-keyword:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this).closest(".wsko-co-priority-keywords-container"),i=s.find(".wsko-co-keyword-input").val();i?window.wsko_post_element({action:"wsko_co_add_priority_keyword",post_id:s.data("post"),keyword:i,nonce:s.data("nonce")},function(t){t.success?(l(s.data("post"),s),p(s.data("post"),s),s.closest(".wsko-content-optimizer").find('.wsko-co-priority-keyword-group[data-prio="'+t.prio+'"]').append(t.view).find(".wsko-co-keyword-group-no-items").hide(),o(".wsko-prio-kw-count-1").text(t.count_pr1),o(".wsko-prio-kw-count-2").text(t.count_pr2),e()):t.limit},!1,s,!1):window.wsko_notification(!1,window.wsko_text("keyword_empty"),"")}),o(".wsko-co-add-priority-keyword-inline:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this);window.wsko_post_element({action:"wsko_co_add_priority_keyword",post_id:s.data("post"),keyword:s.data("keyword"),nonce:s.data("nonce")},function(t){t.success?(l(s.data("post"),s),p(s.data("post"),s),s.closest(".wsko-content-optimizer").find('.wsko-co-priority-keyword-group[data-prio="'+t.prio+'"]').append(t.view).find(".wsko-co-keyword-group-no-items").hide(),o(".wsko-prio-kw-count-1").text(t.count_pr1),o(".wsko-prio-kw-count-2").text(t.count_pr2),e()):t.limit},!1,s,!1)}),o(".wsko-co-delete-priority-keyword:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this).closest(".wsko-co-priority-keyword");window.wsko_post_element({action:"wsko_co_delete_priority_keyword",post_id:s.data("post"),keyword:s.data("keyword"),nonce:s.data("nonce")},function(t){t.success&&(s=s.closest(".wsko-content-optimizer").find('.wsko-co-priority-keyword[data-keyword="'+s.data("keyword")+'"]'),$group=s.fadeOut("fast",function(){o(this).remove()}).closest(".wsko-co-priority-keyword-group"),1==$group.find(".wsko-co-priority-keyword").length&&$group.find(".wsko-co-keyword-group-no-items").show(),o(".wsko-prio-kw-count-1").text(t.count_pr1),o(".wsko-prio-kw-count-2").text(t.count_pr2),l(s.data("post"),s),p(s.data("post"),s))},!1,s,!1)}),void 0!==jQuery.ui&&void 0!==jQuery.ui.draggable&&void 0!==jQuery.ui.droppable&&(o(".wsko-co-similar-prio-kw-list:not(.wsko_init),.wsko-co-priority-keyword-group:not(.wsko_init)").addClass("wsko_init").sortable({accept:".wsko-co-priority-keyword,.wsko-co-keyword-draggable,.wsko-co-similar-prio-kw",receive:function(t,s){o(this)},update:function(t,s){var i=o(s.item),a=o(this);if(a.find(".wsko-co-priority-keyword-placeholder").remove(),i.hasClass("wsko-co-keyword-draggable")){if(a.hasClass("wsko-co-priority-keyword-group")){var n=[];a.closest(".wsko-co-priority-keywords-container").find(".wsko-co-priority-keyword-group").each(function(t){o(this).find(".wsko-co-keyword-draggable").each(function(t){n.push(o(this).data("keyword"))}),o(this).data("prio")==a.data("prio")&&n.push(i.data("keyword"))}),window.wsko_post_element({action:"wsko_co_add_priority_keyword",sort:n,post_id:a.closest(".wsko-co-priority-keywords-container").data("post"),keyword:i.data("keyword"),prio:a.data("prio"),nonce:a.closest(".wsko-co-priority-keywords-container").data("nonce")},function(t){t.success?(l(i.data("post"),i),p(i.data("post"),i),i.remove(),a.closest(".wsko-content-optimizer").find('.wsko-co-priority-keyword-group[data-prio="'+a.data("prio")+'"]').append(t.view),o(".wsko-prio-kw-count-1").text(t.count_pr1),o(".wsko-prio-kw-count-2").text(t.count_pr2),e()):t.limit},!1,a,!1)}else if(a.hasClass("wsko-co-similar-prio-kw-list")){n=[];a.find(".wsko-co-priority-keyword").each(function(t){n.push(o(this).data("keyword"))}),n.push(i.data("keyword")),window.wsko_post_element({action:"wsko_co_add_similar_priority_keyword",sort:n,post_id:a.closest(".wsko-co-priority-keywords-container").data("post"),keyword:i.data("keyword"),keyword_key:a.data("keyword"),nonce:a.closest(".wsko-co-priority-keywords-container").data("nonce-similar")},function(o){o.success&&(l(i.data("post"),i),p(i.data("post"),i),i.remove(),a.closest(".wsko-co-priority-keyword-group").append(o.view),e())},!1,a,!1)}}else if(i.hasClass("wsko-co-priority-keyword")){if(a.hasClass("wsko-co-priority-keyword-group")){n=[];a.closest(".wsko-co-priority-keywords-container").find(".wsko-co-priority-keyword-group").each(function(t){o(this).find(".wsko-co-priority-keyword").each(function(t){n.push(o(this).data("keyword"))})}),i.data("prio")==a.data("prio")?window.wsko_post_element({action:"wsko_co_sort_priority_keyword",sort:n,post_id:i.data("post"),nonce:i.closest(".wsko-co-priority-keywords-container").data("nonce-sort")},!1,!1,i,!1):window.wsko_post_element({action:"wsko_co_add_priority_keyword",sort:n,post_id:i.data("post"),keyword:i.data("keyword"),prio:a.data("prio"),nonce:i.closest(".wsko-co-priority-keywords-container").data("nonce")},function(t){t.success?(i.data("prio",a.data("prio")),o(".wsko-prio-kw-count-1").text(t.count_pr1),o(".wsko-prio-kw-count-2").text(t.count_pr2),l(i.data("post"),i)):(t.limit,i.appendTo(a.closest(".wsko-co-priority-keywords-container").find('.wsko-co-priority-keyword-group[data-prio="'+i.data("prio")+'"]')))},!1,i,!1)}}else if(i.hasClass("wsko-co-similar-prio-kw")&&a.hasClass("wsko-co-similar-prio-kw-list")){n=[];a.find(".wsko-co-similar-prio-kw").each(function(t){n.push(o(this).data("keyword"))}),i.data("keyword-key")==a.data("keyword")?window.wsko_post_element({action:"wsko_co_sort_priority_keyword",sort:n,similar:i.data("keyword-key"),post_id:i.data("post"),nonce:i.closest(".wsko-co-priority-keywords-container").data("nonce-sort")},!1,!1,i,!1):window.wsko_post_element({action:"wsko_co_add_similar_priority_keyword",sort:n,post_id:a.closest(".wsko-co-priority-keywords-container").data("post"),keyword:i.data("keyword"),keyword_key:a.data("keyword"),nonce:a.closest(".wsko-co-priority-keywords-container").data("nonce-similar")},function(o){i.remove(),o.success&&(l(i.data("post"),i),p(i.data("post"),i),a.closest(".wsko-co-priority-keyword").replaceWith(o.view),e())},!1,a,!1)}i.css({top:"0px",left:"0px"}),o(".wsko-co-priority-keyword-group").each(function(t){var s=o(this);1==s.children().length?s.find(".wsko-co-keyword-group-no-items").show():s.find(".wsko-co-keyword-group-no-items").hide()})}}).disableSelection(),o(".wsko-co-priority-keyword:not(.wsko_init)").addClass("wsko_init").each(function(t){var s=o(this);s.draggable({connectToSortable:".wsko-co-priority-keyword-group",containment:s.closest(".wsko-co-priority-keywords-container")})}),o(".wsko-co-keyword-draggable:not(.wsko_init)").addClass("wsko_init").each(function(t){var s=o(this);s.draggable({connectToSortable:".wsko-co-priority-keyword-group,.wsko-co-similar-prio-kw-list",containment:s.closest(".wsko-content-optimizer"),revert:!0,scroll:!1,helper:"clone",appendTo:s.closest(".wsko-content-optimizer")})}),o(".wsko-co-similar-prio-kw:not(.wsko_init)").addClass("wsko_init").each(function(t){var s=o(this);s.draggable({connectToSortable:s.closest(".wsko-co-similar-prio-kw-list"),containment:s.closest(".wsko-co-priority-keywords-container")})})),o(".wsko-co-keyword-input:not(.wsko_init)").addClass("wsko_init").each(function(t){var s,i=o(this),a=i.closest(".wsko-co-priority-keywords-container"),n=a.find(".wsko-co-keyword-suggests"),d=a.find(".wsko-co-keyword-suggests-loader");i.on("keyup change",function(){s&&clearTimeout(s),i.val()!=i.data("old-val")&&(s=setTimeout(function(){d.show(),n.hide(),window.wsko_post_element({action:"wsko_co_get_keyword_suggests",keyword:i.val(),nonce:i.data("nonce")},function(t){return t.success?(i.data("old-val",i.val()),n.html(t.view),0!=n.find("li").length&&(n.show(),n.find(".wsko-co-keyword-suggestion").click(function(t){t.preventDefault(),i.val(o(this).data("val")).focus().change()}),n.find(".wsko-keyword-suggestion-add").click(function(t){t.preventDefault(),t.stopPropagation();var s=o(this);window.wsko_post_element({action:"wsko_co_add_priority_keyword",post_id:s.closest(".wsko-co-priority-keywords-container").data("post"),keyword:s.data("keyword"),prio:s.data("prio"),nonce:s.closest(".wsko-co-priority-keywords-container").data("nonce")},function(t){if(t.success){var i=s.closest(".wsko-co-priority-keywords-container").data("post");p(i,s),l(i,s),s.closest(".wsko-content-optimizer").find('.wsko-co-priority-keyword-group[data-prio="'+t.prio+'"]').append(t.view).find(".wsko-co-keyword-group-no-items").hide(),o(".wsko-prio-kw-count-1").text(t.count_pr1),o(".wsko-prio-kw-count-2").text(t.count_pr2),e()}else t.limit},!1,s,!1),s.closest(".wsko-co-keyword-suggest-wrapper").find("input.wsko-co-keyword-input").focus()}))):n.html(""),d.hide(),!0},function(){return n.html(""),d.hide(),!0},!1,!1)},1e3))}).keypress(function(t){13==t.which&&o(this).closest(".wsko-co-keyword-suggest-wrapper").find(".wsko-co-add-priority-keyword").click()})}),o(".wsko-co-add-similar-kw:not(.wsko-init)").addClass("wsko-init").click(function(t){t.preventDefault(),$wrapper=o(this).closest(".wsko-co-priority-keyword");var s=o(this),i=o('<p data-tooltip="'+window.wsko_text("similar_kw_enter")+'"><input type="text" placeholder="'+window.wsko_text("similar_kw_add")+'" class="wsko-form-control wsko-similar-keyword-input"></p>').insertAfter(o($wrapper).find(".wsko-prio-keyword-text-wrapper")).find("input").focus();i.focusout(function(o){i.fadeOut("fast",function(){i.remove()})}).keypress(function(o){13==o.which&&(o.preventDefault(),i.attr("readonly",!0),window.wsko_post_element({action:"wsko_co_add_similar_priority_keyword",post_id:s.data("post"),keyword_key:s.data("keyword"),keyword:i.val(),nonce:s.data("nonce")},function(o){o.success&&(l(s.data("post"),s),p(s.data("post"),s),s.closest(".wsko-co-priority-keyword").replaceWith(o.view).find(".wsko-co-keyword-group-no-items").hide(),e())},!1,i,!1))}),window.wsko_init_core()}),o(".wsko-co-delete-similar-kw:not(.wsko-init)").addClass("wsko-init").click(function(t){t.preventDefault();var s=o(this);window.wsko_post_element({action:"wsko_co_delete_similar_priority_keyword",post_id:s.data("post"),keyword_key:s.data("keyword-key"),keyword:s.data("keyword"),nonce:s.data("nonce")},function(o){o.success&&(l(s.data("post"),s),p(s.data("post"),s),s.closest(".wsko-co-similar-prio-kw").remove())},!1,s,!1)})}function i(){o(".wsko-co-content-field-content:not(.wsko-init)").addClass("wsko-init").click(function(o){}),o(".wsko-co-save-content:not(.wsko-init)").addClass("wsko-init").click(function(t){t.preventDefault();var s=o(this),e=s.closest(".wsko-co-update-content").find(".wsko-co-content-field-title").val(),i=s.closest(".wsko-co-update-content").find(".wsko-co-content-field-content").val(),a=s.closest(".wsko-co-update-content").find(".wsko-co-content-field-slug").val();e&&i&&window.wsko_post_element({action:"wsko_co_save_content",post_id:s.data("post"),title:e,content:i,slug:a,nonce:s.data("nonce")},function(o){w(),l(s.data("post"),s)},!1,s,!1)}),o(".wsko-nav-link:not(.wsko-side-init)").addClass("wsko-side-init").click(function(o){a()})}function a(){isTabContent=!1,isTabVisualEditor=!1,o("#wsko_co_nav_link_content").length&&o("#wsko_co_nav_link_content").hasClass("wsko-nav-link-active")&&(isTabContent=!0),o("#wsko_content_tab_gutenberg").length?o("#wsko_content_tab_gutenberg").hasClass("wsko-nav-link-active")&&(isTabVisualEditor=!0):isTabVisualEditor=!0,isTabVisualEditor&&isTabContent?o(".wsko-co-main").removeClass("is-html-editor").addClass("is-visual-editor"):o(".wsko-co-main").removeClass("is-visual-editor").addClass("is-html-editor")}function n(){o(".wsko-co-widget.wsko-short-view-active .bsu-tabs").fadeIn()}function d(){o(".wsko-co-canonical-type:not(.wsko-init)").addClass("wsko-init").change(function(t){var s=o(this);"2"==s.val()||"3"==s.val()?s.closest(".wsko-co-technical-wrapper").find(".wsko-co-canonical-arg").show():s.closest(".wsko-co-technical-wrapper").find(".wsko-co-canonical-arg").hide()}),o(".wsko-co-redirect-activate:not(.wsko-init),.wsko-co-redirect-type:not(.wsko-init),.wsko-co-redirect-to:not(.wsko-init)").addClass("wsko-init").change(function(t){var s=o(this),e=s.closest(".wsko-co-technical-wrapper"),i=e.find(".wsko-co-redirect-activate").is(":checked"),a=e.find(".wsko-co-redirect-type").val(),n=e.find(".wsko-co-redirect-to").val(),d={activate_redirect:i,redirect_type:a,redirect_to:n};window.wsko_post_element({action:"wsko_co_save_technicals",post_id:e.data("post"),data:d,nonce:e.data("nonce")},!1,!1,e,!1)})}function r(o){if(o&&o.length&&!o.hasClass("wsko-set-metas-wrapper")&&(o=o.closest(".wsko-set-metas-wrapper")),o&&o.length){if(wsko_co_data.meta_view_autosave||o.data("canonical")){var t=o.data("wsko-meta-save-timeout");t&&clearTimeout(t),o.data("wsko-meta-save-timeout",setTimeout(function(){c(o)},2e3))}o.find(".wsko-metas-save-button").addClass("wsko-button-success wsko-metas-changed")}}function c(o){o&&o.length&&!o.hasClass("wsko-set-metas-wrapper")&&(o=o.closest(".wsko-set-metas-wrapper")),o&&o.length&&o.trigger("wsko_metas_submit")}function w(){o("#wsko_co_content_iframe").attr("src",o("#wsko_co_content_iframe").attr("src"))}function l(t,s){var e=s.closest(".wsko-content-optimizer"),i=e.find(".wsko-co-onpage-issues-wrapper").html(""),a=e.find(".wsko-co-onpage-score-wrapper").html("");window.wsko_set_element_ajax_loader(o('<div class="wsko-lazy-field" data-wsko-lazy-var="score"><div class=""></div></div>').appendTo(a)),window.wsko_set_big_element_ajax_loader(o('<div class="wsko-lazy-field" data-wsko-lazy-var="onpage_issues"><div class=""></div></div>').appendTo(i));var n=i.add(a);window.wsko_load_lazy_data_for_controller(n,"wsko_optimizer",!1,"onpage_issues",{post_id:t},!1)}function k(t,s){var e=s.closest(".wsko-content-optimizer"),i=e.find(".wsko-reloadable-keywords").html("");window.wsko_set_big_element_ajax_loader(o('<div class="wsko-lazy-field" data-wsko-lazy-var="tab_keywords"><div class=""></div></div>').appendTo(i));var a=i;window.wsko_load_lazy_data_for_controller(a,"wsko_optimizer",!1,"keywords",{post_id:t},!1)}function p(t,s){if(wsko_co_data.is_premium){var e=s.closest(".wsko-content-optimizer"),i=e.find(".wsko-reloadable-linking").html("");window.wsko_set_big_element_ajax_loader(o('<div class="wsko-lazy-field" data-wsko-lazy-var="tab_linking"><div class=""></div></div>').appendTo(i));var a=i;window.wsko_load_lazy_data_for_controller(a,"wsko_optimizer",!1,"linking",{post_id:t},!1)}}function _(t,s){if(wsko_co_data.is_premium){var e=s.closest(".wsko-content-optimizer"),i=e.find(".wsko-reloadable-backlinks").html("");window.wsko_set_big_element_ajax_loader(o('<div class="wsko-lazy-field" data-wsko-lazy-var="tab_backlinks"><div class=""></div></div>').appendTo(i));var a=i;window.wsko_load_lazy_data_for_controller(a,"wsko_optimizer",!1,"backlinks",{post_id:t},!1)}}function u(t,s){if(wsko_co_data.is_premium){var e=s.closest(".wsko-content-optimizer"),i=e.find(".wsko-reloadable-performance").html("");window.wsko_set_big_element_ajax_loader(o('<div class="wsko-lazy-field" data-wsko-lazy-var="tab_performance"><div class=""></div></div>').appendTo(i));var a=i;window.wsko_load_lazy_data_for_controller(a,"wsko_optimizer",!1,"performance",{post_id:t},!1)}}function f(t,s){var e=s.closest(".wsko-content-optimizer"),i=e.find(".wsko-reloadable-content").html("");window.wsko_set_big_element_ajax_loader(o('<div class="wsko-lazy-field" data-wsko-lazy-var="tab_content"><div class=""></div></div>').appendTo(i));var a=i;window.wsko_load_lazy_data_for_controller(a,"wsko_optimizer",!1,"content",{post_id:t},!1)}var h=!1;window.wsko_set_rich_snippets=function(){wsko_co_data.is_premium&&(o("#wsko_co_add_rich_snippet:not(.wsko_init)").addClass("wsko_init").click(function(){event.preventDefault(),o("#wsko_co_add_rich_snippets_wrapper").toggle()}),o(".wsko-co-rich-snippet-add-item:not(.wsko_init)").addClass("wsko_init").click(function(){event.preventDefault();var t=o(this),s=(t.closest(".wsko-rich-snippet-container"),t.data("snippet"));t.data("snippet-text");o("#wsko_co_add_rich_snippets_type_step").hide(),o("#wsko_co_add_rich_snippets_config_step").show(),o("#wsko_co_add_rich_snippets_type").val(s),o("#wsko_co_add_rich_snippet_config_default").html("").removeClass("wsko-snippet-config-loaded"),window.wsko_post_element({action:"wsko_get_rich_snippet_config",type:s,nonce:o("#wsko_co_add_rich_snippets_type").data("config-nonce")},function(t){if(t.success)return o("#wsko_co_add_rich_snippet_config_default").html(t.view).addClass("wsko-snippet-config-loaded"),window.wsko_set_rich_snippets(),!0},!1,o("#wsko_co_add_rich_snippets_type"),!1)}),o("#wsko_co_add_rich_snippet_reselect:not(.wsko_init)").addClass("wsko_init").click(function(){event.preventDefault();o(this);o("#wsko_co_add_rich_snippets_type_step").show(),o("#wsko_co_add_rich_snippets_config_step").hide()}),o("#wsko_co_add_rich_snippet_confirm:not(.wsko_init)").addClass("wsko_init").click(function(){event.preventDefault();var t=o(this),s=o("#wsko_co_add_rich_snippets_type").val(),e=t.data("post"),i=o("#wsko_co_add_rich_snippets_config_step").find(":input:not(.wsko-rs-template-input)").serialize();o("#wsko_co_add_rich_snippet_config_default").hasClass("wsko-snippet-config-loaded")?window.wsko_post_element({action:"wsko_create_rich_snippet",type:s,post:e,data:i,nonce:t.data("nonce")},function(s){s.success&&(o("#wsko_co_add_rich_snippets_type_step").show(),o("#wsko_co_add_rich_snippets_config_step").hide(),c(t))},!1,o("#wsko_co_add_rich_snippets_type"),!1):window.wsko_notification(!1,window.wsko_text("snippet_cfg_error"),"")}),o(".wsko-rich-snippets-setting-add:not(.wsko_init)").addClass("wsko_init").click(function(){event.preventDefault();var t=o(this),s=t.closest(".wsko-rich-snippets-settings-list"),e=s.find(".wsko-rich-snippets-setting-list-item:first").clone().show().appendTo(s),i=t.data("key"),a=s.data("index");a||(a=0),s.data("index",a+1),i&&e.find(":input").each(function(){o(this).attr("name",o(this).attr("name").replace(i,a))}),
e.find(".wsko-rs-template-input:input").removeClass("wsko-rs-template-input"),window.wsko_set_rich_snippets()}),o(".wsko-rich-snippets-setting-list-item").not(":first").find(".wsko-rich-snippets-setting-delete:not(.wsko_init)").addClass("wsko_init").click(function(){event.preventDefault();var t=o(this);t.closest(".wsko-rich-snippets-setting-list-item").hide().remove()}),o(".wsko-edit-rich-snippet-save:not(.wsko_init)").addClass("wsko_init").click(function(t){t.preventDefault();var s=o(this);window.wsko_post_element({action:"wsko_save_rich_snippet_config",key:s.data("key"),location:s.data("location"),post:s.data("post"),data:s.closest(".wsko-edit-rich-snippet-container").find(":input:not(.wsko-rs-template-input)").serialize(),nonce:s.data("nonce")},!1,!1,s,!1)}),void 0!==jQuery.ui&&void 0!==jQuery.ui.draggable&&void 0!==jQuery.ui.droppable&&(o(".wsko-metas-placeholder:not(.wsko-init)").addClass("wsko-init").draggable({revert:!0,helper:"clone"}),o(".wsko-rich-snippet-setting").not(".wsko-dnd-init").addClass("wsko-dnd-init").droppable({accept:".wsko-metas-placeholder",tolerance:"pointer",drop:function(t,s){var e=o(s.draggable.eq(0)).data("tag"),i=o(this).get(0);if(document.selection){i.focus();var a=document.selection.createRange();a.text=e,i.focus()}else if(i.selectionStart||0===i.selectionStart){var n=i.selectionStart,d=i.selectionEnd,r=i.scrollTop;i.value=i.value.substring(0,n)+e+i.value.substring(d,i.value.length),i.focus(),i.selectionStart=n+e.length,i.selectionEnd=n+e.length,i.scrollTop=r}else i.value+=e,i.focus();o(i).change()}})))},window.wsko_open_optimizer_modal=function(t,s,e){$modal=o("#wsko_content_optimizer_modal").addClass("wsko-modal-active"),$content=$modal.find(".wsko-modal-content").show().html(""),$modal.find(".wsko-modal-multi-container").hide(),o("body").addClass("modal-open"),h?$modal.find(".wsko-modal-multi-container-bar").show():$modal.find(".wsko-modal-multi-container-bar").hide(),o("#wsko_content_optimizer_modal .wsko-modal-loader").show(),window.wsko_post_element({action:"wsko_get_content_optimizer",post:t,type:s,open_tab:e,nonce:wsko_co_data.content_optimizer_nonce},function(t){if(o("#wsko_content_optimizer_modal .wsko-modal-loader").hide(),t.success)return $content.html(t.view),!0;o("#wsko_content_optimizer_modal .wsko-modal-close").click()},function(){o("#wsko_content_optimizer_modal .wsko-modal-loader").hide(),o("#wsko_content_optimizer_modal .wsko-modal-close").click()},!1,!1)},o(document).on("wsko_init_core",function(a){t(),s(),i(),e(),d(),n(),window.wsko_set_rich_snippets(),o(".wsko-resizable-wrapper:not(.wsko-init)").addClass("wsko-init").each(function(t){var s=o(this);s.find(".wsko-rezisable-wrapper-thumb").mousedown(function(){window.wsko_move_resizable_wrapper=[s,s.offset().top]}),s.find(".wsko-resizable-wrapper-quick-up").click(function(t){event.preventDefault(),event.stopPropagation(),s.css("height",s.data("height")),o(".wsko-co-widget").hasClass("wsko-short-view-active")||o(".wsko-co-widget").toggleClass("wsko-short-view-active"),o(window).scrollTop(o(window).scrollTop()-1),o(window).scrollTop(o(window).scrollTop()+1)}),s.find(".wsko-resizable-wrapper-quick-down").click(function(t){event.preventDefault(),event.stopPropagation(),s.css("height",s.css("max-height")),o(".wsko-co-widget").hasClass("wsko-short-view-active")&&o(".wsko-co-widget").toggleClass("wsko-short-view-active"),o(window).scrollTop(o(window).scrollTop()-1),o(window).scrollTop(o(window).scrollTop()+1)})})});var m=o(document);try{var v=parent.document;if(!v)throw new Error("Unaccessible");m.add(o(window.top.document))}catch(o){}m.mousedown(function(){if(window.wsko_move_resizable_wrapper&&!1!==window.wsko_move_resizable_wrapper)return!1}).mousemove(function(o){if(window.wsko_move_resizable_wrapper&&!1!==window.wsko_move_resizable_wrapper){var t=o.pageY-window.wsko_move_resizable_wrapper[1]+10;window.wsko_move_resizable_wrapper[0].css("height",t).data("height",t)}}).mouseup(function(t){window.wsko_move_resizable_wrapper&&!1!==window.wsko_move_resizable_wrapper&&(o(window).scrollTop(o(window).scrollTop()-1),o(window).scrollTop(o(window).scrollTop()+1),window.wsko_post_element({action:"wsko_co_change_height",height:window.wsko_move_resizable_wrapper[0].height(),nonce:window.wsko_move_resizable_wrapper[0].data("nonce")},function(o){return!0},function(){return!0},!1,!1),window.wsko_move_resizable_wrapper=!1)}),t(),s(),i(),e(),d(),n(),window.wsko_set_rich_snippets()});